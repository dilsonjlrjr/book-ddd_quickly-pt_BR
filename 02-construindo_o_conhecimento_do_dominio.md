# Construindo o Conhecimento do Domínio
 
Vamos considerar o exemplo de um projeto para um sistema de controle de voo e como o conhecimento do domínio pode ser construído.
 
Milhares de aviões estão no ar sobrevoando todo o planeta. Estão voando em seus próprios trajetos para seus devidos destinos. É muito importante certificar-se de que não colidirão no ar. Não tentaremos elaborar um sistema inteiro de controle do tráfego, mas um subconjunto menor que seja um sistema de monitoração do voo. O projeto proposto é um sistema de monitoramento de rotas de cada voo sobre alguma área, determinando se o voo esta seguindo sua suposta rota ou não, e se existe a possibilidade de uma colisão.
Quando será que iremos começar a ter uma perspectiva de desenvolvimento do software? Na seção anterior dissemos que devemos começar por compreender o domínio, que nesse caso, é o monitoramento do tráfego aéreo. Controladores de tráfego aéreo são os especialistas desta área. Mas os controladores não são projetistas do sistema ou especialistas do software. Não espere que eles elaborem uma descrição completa do domínio de seu problema.
Os controladores de tráfego aéreo possuem um vasto conhecimento sobre seu domínio, mas para construir um modelo será necessário extrair as informações essenciais e centralizá-la. Quando você começar a falar com eles, ouvirá muito sobre os aviões que decolam, aterrissam, os perigo de colisão, os aviões que estão esperando a autorização de pouso etc. Para encontrar ordem nesta aparente quantidade caótica de informação, teremos que começar por algum lugar.
O controlador e você concordam que cada avião tem uma partida e um aeroporto de destino. Sendo assim nós temos um avião, uma partida e um destino, como mostrado na figura abaixo:

// TODO: colocar a imagem aqui
 
Enfim, o avião sai de algum lugar e chega a outro. Mas o que acontece no ar? Qual o trajeto do voo? Realmente estamos mais interessados no que acontece durante o voo. O controlador diz que será atribuído ao avião um plano do voo que supostamente deve descrever toda sua trajetória. Enquanto você aguardava sobre a definição de um plano de voo, imaginou qual o caminho seguido pelo avião enquanto ele esta no ar.
 
Após uma discussão mais aprofundada, você ouve uma palavra interessante: rota. Ela instantaneamente captura sua atenção por uma boa razão: ela contém um conceito importante sobre a trajetória do avião. O que os aviões fazem durante o voo? Eles seguem uma rota. Obviamente o ponto de partida e de destino do avião são também os pontos que começam e terminam a rota. Assim, em vez de associar a aeronave a pontos de partida e destino, parece mais natural associá-la a uma rota, que por sua vez se associa com a partida e o destino correspondentes.

Falando com o controlador sobre as rotas que os aviões seguirão, você descobriu que a rota é realmente composta por pequenos segmentos, que juntos constituem uma espécie de uma linha imaginária desde a partida ao seu destino. A linha supostamente passa por pontos fixos pré-determinados. Assim, uma rota pode ser considerada uma série de pontos consecutivos. Neste momento você já não vê a partida e o destino como pontos terminais da rota, mas apenas outros dois pontos entre outros existentes. Isso provavelmente é completamente diferente de como o controlador os vê, mas é uma abstração necessária para ajudar mais tarde. As mudanças resultantes baseadas nestas descobertas são:

O diagrama mostra outro elemento: o fato de que cada ponto é uma localização fixa a ser seguida pela rota no mapa, expresso tridimensionalmente. Mas quando você falar ao controlador descobrirá que ele não vê dessa maneira. Realmente vê a rota como a projeção na terra do plano de voo. Os pontos são fixos na superfície do trajeto, determinado excepcionalmente por suas latitude e longitude. Assim o diagrama correto é:

O que está acontecendo realmente aqui? Você e os peritos do domínio estão falando, vocês estão trocando conhecimentos. Você começa a fazer perguntas e eles respondem. Enquanto fazem isso, os conceitos essenciais do domínio do tráfego aéreo estão sendo definidos. Esses conceitos podem sair desorganizados, mas ainda assim são essenciais para compreender o domínio. Você e os peritos do domínio precisam aprender o máximo possível sobre o domínio do controle de tráfego aéreo. E fazendo as perguntas certas, processando a informação de maneira correta, você e os peritos começarão a esboçar uma visão do domínio, um modelo do domínio. Essa visão é incompleta e não revisada, mas é o começo de que você precisa. Tente entender os conceitos essenciais ao domínio.

Essa é uma parte importante do design. Geralmente há discussões longas entre arquitetos do software ou desenvolvedores e os peritos do domínio. Os especialistas do software querem extrair o conhecimento dos peritos do domínio e também têm que transformá-lo em algo útil. Em dado momento, eles desejarão criar um primeiro protótipo para ver como o sistema funcionará. Ao fazê-lo, poderemos encontrar algumas questões referentes aos seus modelos, ou à sua abordagem, que podem nos levar a querer mudar o modelo. A comunicação não deve ser feita somente em único sentido, dos peritos do domínio para os arquitetos do software e ainda mais para os desenvolvedores. Deve haver um retorno de informação que ajude a criar um modelo melhor, tornando mais clara a compreensão do domínio. Os peritos do domínio conhecem sua área de perícia, mas organizam/usam o conhecimento de uma maneira específica, que não é sempre a melhor a ser executada em um software. A mente analítica dos designers e desenvolvedores do software contribui para alguns dos conceitos chaves como "Aircraft Route * Fix 2DPoint" do domínio, durante as discussões com os peritos do domínio, ajudando também a construir uma estrutura para as discussões futuras como veremos no capítulo seguinte. Nós, especialistas do software (arquitetos do software e os desenvolvedores) e os peritos do domínio, estamos criando o modelo do domínio juntos, e o modelo é o lugar onde essas duas áreas de competência convergirão. Aparenta ser um processo muito moroso, e é, mas é como deve ser, porque a finalidade maior do software é resolver problemas de negócio em um domínio real da vida, por isso, a informação do domínio do software tem que estar sincronizada ao domínio real.
